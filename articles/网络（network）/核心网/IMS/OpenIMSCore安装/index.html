<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>OpenIMSCore安装 | 热带雨林</title><meta name="author" content="aymar"><meta name="copyright" content="aymar"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="1 安装步骤12yum install  svn  bison flex libxml2  libxml2-devel  bind9  curl curl-devel  mysql-server  mysql-devel  ant  gcc g++libmysqlclient15-devel 找不到   ipsec-tools 找不到，不用ipsec的话，不安装  service mysqld s">
<meta property="og:type" content="article">
<meta property="og:title" content="OpenIMSCore安装">
<meta property="og:url" content="https://blog.aymar.cn/articles/%E7%BD%91%E7%BB%9C%EF%BC%88network%EF%BC%89/%E6%A0%B8%E5%BF%83%E7%BD%91/IMS/OpenIMSCore%E5%AE%89%E8%A3%85/index.html">
<meta property="og:site_name" content="热带雨林">
<meta property="og:description" content="1 安装步骤12yum install  svn  bison flex libxml2  libxml2-devel  bind9  curl curl-devel  mysql-server  mysql-devel  ant  gcc g++libmysqlclient15-devel 找不到   ipsec-tools 找不到，不用ipsec的话，不安装  service mysqld s">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://pic.netbian.com/uploads/allimg/250709/232629-17520747894466.jpg">
<meta property="article:published_time" content="2021-03-25T16:00:00.000Z">
<meta property="article:modified_time" content="2021-03-25T16:00:00.000Z">
<meta property="article:author" content="aymar">
<meta property="article:tag" content="blog">
<meta property="article:tag" content="OpenIMSCore">
<meta property="article:tag" content="IMS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pic.netbian.com/uploads/allimg/250709/232629-17520747894466.jpg"><link rel="shortcut icon" href="/config/img/favicon.png"><link rel="canonical" href="https://blog.aymar.cn/articles/%E7%BD%91%E7%BB%9C%EF%BC%88network%EF%BC%89/%E6%A0%B8%E5%BF%83%E7%BD%91/IMS/OpenIMSCore%E5%AE%89%E8%A3%85/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?d6348a489c9706b09ce89b2cd34384e0";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
btf.addGlobalFn('pjaxComplete', () => {
  _hmt.push(['_trackPageview',window.location.pathname])
}, 'baidu_analytics')
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'OpenIMSCore安装',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap" rel="stylesheet"><link rel="stylesheet" href="/config/css/custom_head.css"><meta name="generator" content="Hexo 7.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head><body><div id="web_bg" style="background-image: url(http://img.netbian.com/file/2025/0710/082620NrEN7.jpg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/config/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">52</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">48</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">24</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-book"></i><span> 博文</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/share/"><i class="fa-fw fa fa-sticky-note"></i><span> 分享</span></a></li><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movie/"><i class="fa-fw fas fa-video"></i><span> 影视</span></a></li><li><a class="site-page child" href="/Game/"><i class="fa-fw fa fa fa-gamepad"></i><span> 游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-address-card"></i><span> 关于博主</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://pic.netbian.com/uploads/allimg/250709/232629-17520747894466.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">热带雨林</span></a><a class="nav-page-title" href="/"><span class="site-name">OpenIMSCore安装</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-book"></i><span> 博文</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/share/"><i class="fa-fw fa fa-sticky-note"></i><span> 分享</span></a></li><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movie/"><i class="fa-fw fas fa-video"></i><span> 影视</span></a></li><li><a class="site-page child" href="/Game/"><i class="fa-fw fa fa fa-gamepad"></i><span> 游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-address-card"></i><span> 关于博主</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">OpenIMSCore安装</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-03-25T16:00:00.000Z" title="发表于 2021-03-26 00:00:00">2021-03-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-03-25T16:00:00.000Z" title="更新于 2021-03-26 00:00:00">2021-03-26</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%A0%B8%E5%BF%83%E7%BD%91/">核心网</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%A0%B8%E5%BF%83%E7%BD%91/IMS/">IMS</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%A0%B8%E5%BF%83%E7%BD%91/IMS/OpenIMSCore/">OpenIMSCore</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="1-安装步骤"><a href="#1-安装步骤" class="headerlink" title="1 安装步骤"></a>1 安装步骤</h1><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install  svn  bison flex libxml2  libxml2-devel  bind9  curl curl-devel  mysql-server  mysql-devel  ant  gcc g++</span><br><span class="line">libmysqlclient15-devel 找不到   ipsec-tools 找不到，不用ipsec的话，不安装</span><br></pre></td></tr></tbody></table></figure>

<p>service mysqld start<br>mysqladmin -u root  password ‘UfmIvJUvD4fpt’;</p>
<p>mkdir /opt/OpenIMSCore<br>          cd /opt/OpenIMSCore<br>mkdir FHoSS<br>          svn checkout svn://svn.code.sf.net/p/openimscore/code/FHoSS/trunk FHoSS<br>mkdir ser_ims<br>          svn checkout svn://svn.code.sf.net/p/openimscore/code/ser_ims/trunk ser_ims<br>cd FHoSS<br>          ant compile deploy<br>          cd ..<br>cd ser_ims<br>          make install-libs all<br>          cd ..<br>mysql -u root -p &lt; FHoSS/scripts/hss_db.sql<br>mysql -u root -p &lt; FHoSS/scripts/userdata.sql<br>mysql -u root -p &lt; ser_ims/cfg/icscf.sql<br>cp ser_ims/cfg/<em>.cfg .<br>          cp ser_ims/cfg/</em>.xml .<br>          cp ser_ims/cfg/*.sh .</p>
<h1 id="2-参考"><a href="#2-参考" class="headerlink" title="2 参考"></a>2 参考</h1><p><a target="_blank" rel="noopener" href="http://openimscore.sourceforge.net/?q=installation_guide">http://openimscore.sourceforge.net/?q=installation_guide</a><br>ser_ims<br><a target="_blank" rel="noopener" href="http://openimscore.sourceforge.net/docs/ser_ims/main.html">http://openimscore.sourceforge.net/docs/ser_ims/main.html</a><br>FHoSS<br><a target="_blank" rel="noopener" href="http://openimscore.sourceforge.net/docs/FHoSS/using.html">http://openimscore.sourceforge.net/docs/FHoSS/using.html</a></p>
<p><a target="_blank" rel="noopener" href="https://clearwater.readthedocs.io/en/stable/OpenIMSCore_HSS_Integration.html">https://clearwater.readthedocs.io/en/stable/OpenIMSCore_HSS_Integration.html</a><br><a target="_blank" rel="noopener" href="https://github.com/openbaton/clearwater-packages">https://github.com/openbaton/clearwater-packages</a><br><a target="_blank" rel="noopener" href="http://openimscore.sourceforge.net/?q=installation_guide">http://openimscore.sourceforge.net/?q=installation_guide</a><br><a target="_blank" rel="noopener" href="http://openimscore.sourceforge.net/docs/FHoSS/using.html">http://openimscore.sourceforge.net/docs/FHoSS/using.html</a><br><a target="_blank" rel="noopener" href="https://www.mehic.info/2011/12/openimscore-installation-and-configuration-guide/">https://www.mehic.info/2011/12/openimscore-installation-and-configuration-guide/</a><br><a target="_blank" rel="noopener" href="https://hub.packtpub.com/webrtc-sip-and-ims/">https://hub.packtpub.com/webrtc-sip-and-ims/</a><br><a target="_blank" rel="noopener" href="https://github.com/openbaton/openimscore-packages">https://github.com/openbaton/openimscore-packages</a><br>readme: <a target="_blank" rel="noopener" href="https://nil.uniza.sk/building-debian-packages-openimscore/">https://nil.uniza.sk/building-debian-packages-openimscore/</a></p>
<h2 id="2-1-开源SIP"><a href="#2-1-开源SIP" class="headerlink" title="2.1 开源SIP"></a>2.1 开源SIP</h2><p>opensips<br><a target="_blank" rel="noopener" href="https://opensips.org/Documentation/Manuals">https://opensips.org/Documentation/Manuals</a><br>openbaton<br><a target="_blank" rel="noopener" href="https://openbaton.org/documentation/nfvo-installation/index.html">https://openbaton.org/documentation/nfvo-installation/index.html</a><br>open5Gs<br><a target="_blank" rel="noopener" href="https://github.com/open5gs/open5gs">https://github.com/open5gs/open5gs</a><br>asterisk<br><a target="_blank" rel="noopener" href="https://www.asterisk.org/downloads/">https://www.asterisk.org/downloads/</a><br>kamailio<br><a target="_blank" rel="noopener" href="http://www.kamailio.org/">www.kamailio.org</a><br>freeswitch<br><a target="_blank" rel="noopener" href="https://freeswitch.com/">https://freeswitch.com/</a></p>
<h2 id="2-2-OpenIMSCore-Installation-andConfiguration-Guide"><a href="#2-2-OpenIMSCore-Installation-andConfiguration-Guide" class="headerlink" title="2.2 OpenIMSCore : Installation andConfiguration Guide"></a>2.2 <a target="_blank" rel="noopener" href="https://www.mehic.info/2011/12/openimscore-installation-and-configuration-guide/">OpenIMSCore : Installation andConfiguration Guide</a></h2><p>December 4, 2011</p>
<p>Hi there, my current project (also and next few<br>posts) will be on subject of IMS. For faculty research I must install and<br>examine an I-CSCF part of IMS subsystem. So let’s go :</p>
<p>The&nbsp;IP<br>Multimedia Subsystem&nbsp;or&nbsp;IP<br>Multimedia Core Network Subsystem&nbsp;(IMS)<br>is an architectural framework for delivering&nbsp;<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Internet_Protocol">Internet Protocol</a>&nbsp;(IP)&nbsp;<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Multimedia">multimedia</a>&nbsp;services. It<br>was originally designed by the wireless&nbsp;<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Standardization">standards</a>&nbsp;body&nbsp;<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/3rd_Generation_Partnership_Project">3rd<br>Generation Partnership Project</a>&nbsp;(3GPP), as a part of the vision for<br>evolving mobile networks beyond&nbsp;<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/GSM">GSM</a>.<br>Its original formulation (3GPP Rel-5) represented an approach to delivering<br>“Internet services” over&nbsp;<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/GPRS">GPRS</a>.<br>This vision was later updated by 3GPP,&nbsp;<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/3GPP2">3GPP2</a>&nbsp;and&nbsp;<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/European_Telecommunications_Standards_Institute">ETSI</a>&nbsp;<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/TISPAN">TISPAN</a>&nbsp;by requiring support<br>of networks other than GPRS, such as&nbsp;<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Wireless_LAN">Wireless LAN</a>,&nbsp;<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/CDMA2000">CDMA2000</a>&nbsp;and fixed line.</p>
<p>To ease the integration with the<br>Internet, IMS uses&nbsp;<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/IETF">IETF</a>&nbsp;protocols<br>wherever possible, e.g.&nbsp;<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Session_Initiation_Protocol">Session Initiation Protocol</a>&nbsp;(SIP). According to the 3GPP,<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/IP_Multimedia_Subsystem#cite_note-0">[1]</a>&nbsp;IMS<br>is not intended to standardize applications but rather to aid the access of<br>multimedia and voice applications from wireless and wireline terminals, i.e.<br>create a form of&nbsp;<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Technological_convergence#Fixed-mobile_convergence">fixed-mobile convergence</a>&nbsp;(FMC). This is done by having a horizontal<br>control layer that isolates the access network from the&nbsp;<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Service_layer">service<br>layer</a>. From a logical architecture<br>perspective, services need not have their own control functions, as the control<br>layer is a common horizontal layer. However in implementation this does not<br>necessarily map into greater reduced cost and complexity.</p>
<p>Alternative and overlapping technologies for<br>access and provisioning of services across wired and wireless networks include<br>combinations of&nbsp;<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Generic_Access_Network">Generic Access<br>Network</a>,&nbsp;<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Softswitch">soft<br>switches</a>&nbsp;and “naked” SIP. (SOURCE : wiki)</p>
<p>The network architecture, IP Multimedia Subsystem<br>(IMS) has become standard thanks to the collaboration of Telecoms &amp;<br>Internet converged Services &amp; Protocols for Advanced Networks (TISPAN) and<br>The Third Generation Partnership Project (3GPP) standardization committees set<br>up by the body European Telecommunications Standards Institute (ETSI).</p>
<p>IMS (IP Multimedia Subsystem) plays an important<br>role in delivering key services such as Quality of Service (QoS), security,<br>instant messaging (IM), IP Television (IPTV), etc..&nbsp;both fixed and mobile<br>networks.</p>
<p>The basic structure of IMS that enables it to<br>support IM and chat services is as follows:</p>
<ul>
<li>Home Subscriber<br> Server (HSS)</li>
<li>Proxy – Call<br> Session Control Function (P-CSCF)</li>
<li>Interrogating –<br> Call Session Control Function (I-CSCF)</li>
<li>Serving – Call<br> Session Control Function (S-CSCF)</li>
</ul>
<p>What is OpenIMSCore?</p>
<p>OpenIMSCore is an OpenSource project (Fraunhofer<br>FOKUS, German organization that focuses on research and development of new<br>technologies) which produced the eponymous software: software that implements<br>the functionality of the 3 types of CSCF and an approximate version, but still<br>effective, HSS.&nbsp;The project OpenIMSCore appartiente an OpenSource project<br>OpenIMS Playground (managed by the same group FOKUS) much more extensive than<br>trying to implement all the services defined by the IMS standard.</p>
<p>For more information about Playground OpenIMS<br>OpenIMSCore and I recommend you look at the following sites:</p>
<p><a target="_blank" rel="noopener" href="http://translate.googleusercontent.com/translate_c?ie=UTF8&amp;rurl=translate.google.com&amp;sl=it&amp;tl=en&amp;twu=1&amp;u=http://www.openimscore.org/&amp;usg=ALkJrhhrH3iMLX1c-e6v69RFKGBvNxQbWw">http://www.openimscore.org/</a></p>
<p><a target="_blank" rel="noopener" href="http://translate.googleusercontent.com/translate_c?ie=UTF8&amp;rurl=translate.google.com&amp;sl=it&amp;tl=en&amp;twu=1&amp;u=http://www.fokus.fraunhofer.de/bereichsseiten/testbeds/ims_playground/index.php?lang=en&amp;usg=ALkJrhgp02UUVO5YUlKvubSqMWLGQl8asw">http://www.fokus.fraunhofer.de/bereichsseiten/testbeds/ims_playground/index.php?lang=en</a></p>
<p>Early IMS</p>
<p>There is a need for an IMS version that offers<br>similar features but doesn’t require the investments necessary for full IMS.<br>This version has been defined as Early IMS, and has the following advantages:</p>
<ul>
<li>The user entity<br> does not have to support IPv6</li>
<li>The user entity<br> does not require an USIM/ISIM</li>
<li>The user entity<br> does not have to support IPsec</li>
</ul>
<p>However, as some of the IMS security mechanisms<br>rely on the presence of a USIM/ISIM, such as user identification, the use of<br>Early IMS has security implications that should be acknowledged.</p>
<p>Advantages and Issues</p>
<p>Advantages over existing systems</p>
<ul>
<li>The core network is<br> independent of a particular access technology</li>
<li>Integrated mobility<br> for all network applications</li>
<li>Easier migration of<br> applications from fixed to mobile users</li>
<li>Faster deployment<br> of new services based on standardized architecture</li>
<li>An end to unique or<br> customized applications, leading to lower CAPEX and OPEX</li>
<li>New applications<br> such as presence information, videoconferencing, Push to talk over<br> cellular (POC), multiparty gaming, community services and content sharing.</li>
<li>Evolution to<br> combinational services, for example by combining instant messaging and<br> voice</li>
<li>User profiles are<br> stored in a central location</li>
<li>The architecture is<br> designed for easy scalability and redundancy</li>
</ul>
<p>Differences with free VoIP</p>
<p>It’s possible to run free VoIP applications over<br>the regular Internet. Then why do we need IMS, if all the power of the Internet<br>is already available for 3G users?</p>
<ul>
<li><p>Quality of Service<br> : The network offers no guarantees about the amount of bandwidth a user<br> gets for a particular connection or about the delay the packets<br> experience. Consequently, the quality of a VoIP conversation can vary<br> dramatically throughout its duration.</p>
</li>
<li><p>Contrasting view:<br> The underlying routing structure of the Internet can effectively<br> eliminate bandwidth and latency issues for the vast majority of VoIP<br> calls. And what the Internet itself doesn’t handle can be handled by<br> sophisticated audio processing at the terminal endpoints of calls.</p>
</li>
<li><p>Re-Contrasting<br> view: The Internet Core network may handle bandwidth and latency issues,<br> mainly due to statistical reasons. The problem with free VoIP is that<br> the Internet Access Provider can not easily differentiate free VoIP<br> service from any further bandwidth consuming application in the access<br> network. Especially the last mile is the bottleneck and with IMS the<br> ISP/operator can guarantee QoS since he “knows” which service (e.g.<br> VoIP) has been requested by the user.</p>
</li>
<li><p>Charging of<br> multimedia services : Videoconferences can transfer a large amount of<br> information, but the telecom operator can’t charge separately for this<br> data. Some business models might be more beneficial for the user (for<br> instance: a fixed price per message, not per byte); others might charge<br> extra for better QoS.</p>
</li>
<li><p>Contrasting view:<br> Complex charging structures are a legacy of the telephone industry and<br> are not needed on Internet connections which are typically flat-rate. The<br> cost of monitoring traffic to distinguish between different types of<br> bytes greatly adds to the cost of delivering those bytes.</p>
</li>
<li><p>Re-Contrasting<br> view: IMS charging is very simple and built-in. An unlimited flat-rate<br> for all users would penalize the majority of users who are not<br> interested in downloading several GBytes of movies per week. A flexible<br> (volume, session – time &amp; service, event based) charging<br> architecture creates new opportunities and can be much more attractive<br> for the end-user.</p>
</li>
<li><p>Integration of<br> different services : an operator can use services developed by third<br> parties, combine them, integrate them with services they already have, and<br> provide the user with a completely new service. For example: if voicemail<br> and text-to-speech is combined, a voice version of incoming text messages<br> can be provided for blind users.</p>
</li>
<li><p>Contrasting view:<br> IMS requires that all services be integrated into, and delivered by the<br> operator’s network. Therefore only those services that “pass muster” with<br> the operator will be supplied to their customers. Operators must incur<br> integration costs, and both the network operator and the third-party<br> service offeror must reach a business agreement on the revenue model for<br> offering the service. Third-party services that network operators don’t –<br> for whatever arbitrary reason – want to offer will never be seen by<br> consumers. This is a dramatic difference from the Internet, where anyone<br> can offer any website service to anyone with an Internet connection.</p>
</li>
<li><p>Re-Contrasting<br> view: Any operator controlled service needs to be integrated to<br> guarantee stability, quality, security and ease-of-use. With IMS the<br> integration is just easier (e.g. due to centralized User database) and<br> reduces costs (OPEX and CAPEX – e.g. due to service independent Call<br> Session Controller). With IMS the end-user can expect Internet like<br> services – just without more or less complicated log-in procedures or<br> security concerns. For sure, the Internet community will always be<br> faster in developing potential new applications.</p>
</li>
</ul>
<p>Install Guide</p>
<p>The following installation guide has been tested<br>on two Ubuntu releases:&nbsp;Ubuntu 7.04 Feisty Fawn&nbsp;and&nbsp;Ubuntu 7.10<br>Gutsy Gibbon. Also I’m currently using Ubutnu 10.10, and I didn’t note any<br>problem, so you may follow this guide for that version of Ubutnu.&nbsp;In<br>addition, this guide in order to test the correct functionality of the system<br>will propose the installation and configuration of a client SIP / IMS<br>UctIMSClient (client developed by the University of Cape Town in South Africa:&nbsp;<a target="_blank" rel="noopener" href="http://translate.googleusercontent.com/translate_c?ie=UTF8&amp;rurl=translate.google.com&amp;sl=it&amp;tl=en&amp;twu=1&amp;u=http://uctimsclient.berlios.de/&amp;usg=ALkJrhjZfLFtPRX6faMFdcJmnHQYs2oAiQ">http://uctimsclient.berlios.de<br>/</a>&nbsp;) that helps to determine if the SIP messages are processed<br>correctly by the architecture.&nbsp;If you do not want to use this software you<br>can use any SIP client / IMS stress including:</p>
<ul>
<li>Xlite:&nbsp;<a target="_blank" rel="noopener" href="http://translate.googleusercontent.com/translate_c?ie=UTF8&amp;rurl=translate.google.com&amp;sl=it&amp;tl=en&amp;twu=1&amp;u=http://www.counterpath.com/&amp;usg=ALkJrhgZ3OIL8_fvOOjwJDX46JTurBrF2w">http://www.counterpath.com</a></li>
<li>OpenIC (created by<br> the same client</li>
</ul>
<p>In these cases, at least in the first instance we<br>do not propose a guide to installing it a configuration.&nbsp;However, for<br>those who want to try, such software is easy to setup and configure them for<br>the information can be easily obtained from the information used to configure<br>UctIMSClient, which from a didactic point of view is the most complete.</p>
<p>For those wishing to implement a greater number of<br>services and components, the University of Cape Town has created the code and<br>its help to install them.&nbsp;In particular, services, products and related<br>installation guides are:</p>
<ul>
<li>Uct Policy Decision<br> Function (PDF) and Policy Enforcement Point (PEP): a guide<a target="_blank" rel="noopener" href="http://translate.googleusercontent.com/translate_c?ie=UTF8&amp;rurl=translate.google.com&amp;sl=it&amp;tl=en&amp;twu=1&amp;u=http://uctimsclient.berlios.de/policy_control_howto.html&amp;usg=ALkJrhgVOkPU43R3ZxzhEfhO8wrqrz1bGg">http://uctimsclient.berlios.de/policy_control_howto.html</a></li>
<li>Uct IPTV Streaming<br> Server: Driving&nbsp;<a target="_blank" rel="noopener" href="http://translate.googleusercontent.com/translate_c?ie=UTF8&amp;rurl=translate.google.com&amp;sl=it&amp;tl=en&amp;twu=1&amp;u=http://uctimsclient.berlios.de/uctimsclient_on_ubuntu_howto.html&amp;usg=ALkJrhi4kV02jc4HPTuHklbvbVRDIjY-fg">http://uctimsclient.berlios.de/uctimsclient_on_ubuntu_howto.html</a></li>
<li>Uct Back-2-Back<br> User Agent: Driving&nbsp;<a target="_blank" rel="noopener" href="http://translate.googleusercontent.com/translate_c?ie=UTF8&amp;rurl=translate.google.com&amp;sl=it&amp;tl=en&amp;twu=1&amp;u=http://uctimsclient.berlios.de/back-2-back_user_agent_howto.html&amp;usg=ALkJrhgX8t_gWIcQNvHYAxEikqBWpnZuzg">http://uctimsclient.berlios.de/back-2-back_user_agent_howto.html</a></li>
</ul>
<p>My guide will be a fusion and integration with<br>personal configurations that allowed the software to run properly with<br>ease.&nbsp;In particular, the guides are used:</p>
<ul>
<li>OpenIMSCore:<br> Driving&nbsp;<a target="_blank" rel="noopener" href="http://translate.googleusercontent.com/translate_c?ie=UTF8&amp;rurl=translate.google.com&amp;sl=it&amp;tl=en&amp;twu=1&amp;u=http://uctimsclient.berlios.de/openimscore_on_ubuntu_howto.html&amp;usg=ALkJrhhf2iql7Ss7IHh1jXpDlNCbSTF09Q">http://uctimsclient.berlios.de/openimscore_on_ubuntu_howto.html</a></li>
<li>UctIMSClient:<br> Driving&nbsp;<a target="_blank" rel="noopener" href="http://translate.googleusercontent.com/translate_c?ie=UTF8&amp;rurl=translate.google.com&amp;sl=it&amp;tl=en&amp;twu=1&amp;u=http://uctimsclient.berlios.de/uctimsclient_on_ubuntu_howto.html&amp;usg=ALkJrhi4kV02jc4HPTuHklbvbVRDIjY-fg">http://uctimsclient.berlios.de/uctimsclient_on_ubuntu_howto.html</a></li>
</ul>
<p>As you can see, most of the guides running on<br>Ubuntu and in many cases on&nbsp;Ubuntu 7.10 Gutsy Gibbon.</p>
<p>OpenIMSCore: download the source code</p>
<p>To download the source code we<br>need&nbsp;subversion&nbsp;package:</p>
<p>sudo apt-get install subversion</p>
<p>We create folders in which it will place the<br>downloaded source code:</p>
<p>sudo mkdir / opt / OpenIMSCore /</p>
<p>We give you the rights with which we access<br>usually to work on the required folder&nbsp;/ opt / OpenIMSCore:</p>
<p>sudo chown-R username / opt / OpenIMSCore /</p>
<p>where instead of&nbsp;username&nbsp;insert the<br>user name that we usually use.</p>
<p>We then create the folders in which you place the<br>code: the code will be placed in a compiled that will produce the features of<br>the CSCF and the other will place the compiled code that will produce the<br>features of HSS.</p>
<p>cd / opt / OpenIMSCore</p>
<p>mkdir ser_ims</p>
<p>mkdir FHoSS</p>
<p>Now we download the code:</p>
<p>svn checkout <a target="_blank" rel="noopener" href="http://svn.berlios.de/svnroot/repos/openimscore/ser_ims/trunk">http://svn.berlios.de/svnroot/repos/openimscore/ser_ims/trunk</a> ser_ims</p>
<p>svn checkout <a target="_blank" rel="noopener" href="http://svn.berlios.de/svnroot/repos/openimscore/FHoSS/trunk">http://svn.berlios.de/svnroot/repos/openimscore/FHoSS/trunk</a> FHoSS</p>
<p>In this case, we consider that the internet<br>connection is done in a straightforward manner.&nbsp;If we are behind a proxy<br>must properly configure subversion.</p>
<p>OpenIMSCore: Install the necessary<br>packages for compiling</p>
<p>We need a number of packages to compile.&nbsp;To<br>install a terminal run the following command:</p>
<p>sudo apt-get install sun-java6-jdk mysql-server libmysqlclient15-dev<br>libxml2 libxml2-dev bison flex front bind9</p>
<p>OpenIMSCore: configure the DHCP<br>Server and DNS Server</p>
<p>Since we are requiring that the DNS server turns<br>on our machine, then we must delete the # and activates the option&nbsp;prepend<br>domain-name-servers 127.0.0.1;&nbsp;in the file&nbsp;/<br>etc/dhcp3/dhclient.conf.&nbsp;Remember to open the following file with root<br>privileges.</p>
<p>Copy the file to&nbsp;open ims.dnszone&nbsp;in<br>the&nbsp;/ etc / bind:</p>
<p>sudo cp / opt / OpenIMSCore / ser_ims / cfg / open-ims.dnszone / etc<br>/ bind /</p>
<p>I remember that bind is a DNS server OpenSource.</p>
<p>Append to the file&nbsp;/ etc / bind /<br>named.conf.local&nbsp;the following lines:</p>
<p>areas “open-ims.test” {</p>
<p>type master;</p>
<p>“/ etc / bind / open-ims.dnszone”;</p>
<p>};</p>
<p>Restart the DNS server with the following command:</p>
<p>sudo / restart etc/init.d/bind9</p>
<p>We need to ensure that the DNS server can be<br>contacted from our PC, which is why we edit the file&nbsp;/ etc /<br>resolv.conf&nbsp;and add the following lines:</p>
<p>search open-ims.test</p>
<p>nameserver 127.0.0.1</p>
<p>We verify that it works properly pinging<br>pcscf.open-ims.test</p>
<p>ping-pcscf.open ims.test</p>
<p>As a rule, we get an answer.&nbsp;If the ping does<br>not work, restart the network interface (localhost) or attiviamola, in the case<br>has not been activated:</p>
<p>sudo / etc / init.d / networking restart</p>
<p>and rieseguiamo ping with the command described<br>above.</p>
<p>This is the most complex phase of the entire<br>installation as in many cases the software does not work properly due to<br>incorrect configuration of the server bind.</p>
<p>OpenIMSCore: Configure Database</p>
<p>IMS architecture as it happens, even in<br>OpenIMSCore implements a MySQL database.&nbsp;For this reason we must set it by<br>introducing the information is related to I-CSCF to HSS that.</p>
<p>Run the following commands:</p>
<p>cd / opt / OpenIMSCore</p>
<p>mysql-u root-p &lt;ser_ims / cfg / icscf.sql</p>
<p>mysql-u root-p &lt;FHoSS / scripts / hss_db.sql</p>
<p>mysql-u root-p &lt;FHoSS / scripts / userdata.sql</p>
<p>There will be prompted for a password, which by<br>default is set in MySql: why simply press&nbsp;Enter.</p>
<p>OpenIMSCore: Building from source</p>
<p>Initially compile the CSCF.&nbsp;To do this we run<br>the following commands:</p>
<p>cd / opt / OpenIMSCore / ser_ims /</p>
<p>sudo make install-libs all</p>
<p>The duration of completion varies depending on the<br>characteristics of the machine where you install the software.&nbsp;In general,<br>the duration is between 5-10 minutes.</p>
<p>To fill the other hand HSS (FHoSS in OpenIMSCore)<br>we need to set the environment variable JAVA using the command:</p>
<p>export JAVA_HOME = “/ usr/lib/jvm/java-1.6.0-sun”</p>
<p>Since this environment variable must be set each<br>time you run the script for the execution of FHoSS, I advise you<br>to&nbsp;change. Bashrcpresent in your home directory:</p>
<p>gedit ~ /. bashrc</p>
<p>Glue the end the following string:</p>
<p>export JAVA_HOME = “/ usr/lib/jvm/java-1.6.0-sun”</p>
<p>export<br>CLASSPAT=.$JAVA_HOME/lib:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</p>
<p>export PATH=$PATH:/usr/lib/jvm/java-6-sun/lib</p>
<p>save and close the file.&nbsp;Launch:</p>
<p>source ~ /. bashrc</p>
<p>to apply the changes to environment variables.</p>
<p>Compile using the following commands FHoSS</p>
<p>cd / opt / OpenIMSCore / FHoSS</p>
<p>ant compile deploy</p>
<p>Finally&nbsp;ZhDataType.xsd&nbsp;modify the file<br>in the directory&nbsp;/ opt / OpenIMSCore / FHoSS / xsd /</p>
<p>gedit / opt / OpenIMSCore / FHoSS / xsd / ZhDataType.xsd</p>
<p>and replace the line</p>
<p>schemaLocation = “<a target="_blank" rel="noopener" href="http://www.w3.org/2001/xml.xsd%E2%80%9D">http://www.w3.org/2001/xml.xsd”</a><br>/&gt;</p>
<p>with</p>
<p>schemaLocation = “file: / / / opt / OpenIMSCore / FHoSS / xsd /<br>xml.xsd” /&gt;</p>
<p>OpenIMSCore: Execution of various<br>scripts</p>
<p>To facilitate the implementation copy all files<br>and configuration of all FHoSS CSCF and associated run script in the&nbsp;/ opt<br>/ OpenIMSCore /:</p>
<p>cp / opt / OpenIMSCore / ser_ims / cfg / * / opt / OpenIMSCore /</p>
<p>Finally we run all the entities<br>OpenIMSCore.&nbsp;I recommend you open a new tab (Ctrl + Male + T) to each<br>entity and set the tab title.</p>
<p>For P-CSCF lanciarce</p>
<p>/ Opt / OpenIMSCore / pcscf.sh</p>
<p>To run I-CSCF</p>
<p>/ Opt / OpenIMSCore / icscf.sh</p>
<p>To launch the S-CSCF</p>
<p>/ Opt / OpenIMSCore / scscf.sh</p>
<p>To launch FHoSS</p>
<p>/ Opt / OpenIMSCore / fhoss.sh</p>
<p>If you can see an error writing something like :”</p>
<p>set_mod_param_regax: No module<br>matching <pcscf> found&nbsp; i ERROR<br>CURL_ERROR_SIZE”</pcscf></p>
<p>it means that you must install</p>
<p>libcurl4-openssl-dev</p>
<p>and compile FhoSS from the<br>begining.</p>
<p>OpenIMSCore: Test and install<br>OpenIMSCore UctIMSClient</p>
<p>To test OpenIMSCore, UctIMSClient need to install<br>(in my case).&nbsp;If you want to install or use any other software that<br>supports SIP as explained in the introduction.</p>
<p>UctIMSClient: Installation guide will<br>be posted in next post.</p>
<p>UctIMSClient: Configuration</p>
<p>We must initially launch UctIMSClient, opening a<br>new tab and set the title of Bob:</p>
<p>uctimsclient</p>
<p>As a rule, the default settings UctIMSClient<br>conform to the information contained in the HSS and conform to the topology of<br>the network.The figure below presents the user configuration that Bob is<br>already configured in the database.&nbsp;The same configurations of<br>the&nbsp;Public User Identity&nbsp;unless,&nbsp;Private User<br>Identity&nbsp;and&nbsp;Password.</p>
<p>However in the case of Bob:</p>
<ul>
<li>Public User<br> Identity:&nbsp;sip: <a href="mailto:bob@open-ims.test">bob@open-ims.test</a></li>
<li>Private User<br> Identity:&nbsp;<a href="mailto:bob@open-ims.test">bob@open-ims.test</a></li>
<li>Password:&nbsp;bob</li>
</ul>
<p>Also open another tab with the title of Alice and<br>launched another UctIMSClient:</p>
<p>uctimsclient</p>
<p>In the case of Alice:</p>
<ul>
<li>Public User<br> Identity:&nbsp;sip: <a href="mailto:alice@open-ims.test">alice@open-ims.test</a></li>
<li>Private User<br> Identity:&nbsp;<a href="mailto:alice@open-ims.test">alice@open-ims.test</a></li>
<li>Password:&nbsp;alice</li>
</ul>
<p>UctIMSClient: sending the message<br>register and deregister SIP call</p>
<p>To run the register, simply click on<br>the&nbsp;Register as Alice&nbsp;in Alice’s case, the terminal, as well as in<br>the figure below, in the case of Bob, click on<br>the&nbsp;Register&nbsp;button&nbsp;as&nbsp;in the case of&nbsp;Bob&nbsp;Bob<br>terminal.</p>
<p>Simply click on<br>the&nbsp;Deregister&nbsp;deregister UctIMSClient to perform the desired user<br>that owns the client UctIMSClient.</p>
<p>I also recommend using<br>the&nbsp;Call&nbsp;key&nbsp;or Answer,&nbsp;ricordatoci to correctly address<br>the SIP address to which the call.&nbsp;If you are using the terminal of Alice,<br>the address where the call is to address&nbsp;sip: <a href="mailto:bob@open-ims.test">bob@open-ims.test</a>,&nbsp;as<br>well as in the figure below.</p>
<p>OpenIMSCore: add new users and manage<br>HSS (optional)</p>
<p>To add a new user and to manage the HSS, we<br>facilitated the GUI is called through a web browser.</p>
<p>To do this, open&nbsp;Firefox&nbsp;and type in:</p>
<p><a target="_blank" rel="noopener" href="http://localhost:8080/">http://localhost:8080</a></p>
<p>You will be prompted for username and password<br>and enter the following information:</p>
<p>Username: hssAdmin</p>
<p>Password: hss</p>
<p>I remember it is case-sensitive.</p>
<p>OpenIMSCore: Customize the IMS<br>network</p>
<p>You can change the realm (in the case of default<br>was open-ims.test) and the IP address of the whole network (in case of default<br>was 127.0.0.1).</p>
<p>The developers have made ​​a bash script<br>called&nbsp;configurator.sh&nbsp;that lets you edit the configuration files<br>useful for customizing the IMS network on a single machine, that is, all the<br>scripts of various IMS entities must be launched from the same machine.</p>
<p>It ‘important to remember that this script can be<br>used only once from a successful installation: in practice, if installed<br>correctly OpenIMSCore, you can use configurator.sh, but if you edit<br>configuration files manually or use configurator.sh after OpenIMSCore<br>installing, you can not reuse the script and you are forced or edit<br>configurator.sh configurator.sh to make that effect to the new changes or you<br>need to manually edit the configuration file (this complex for the average<br>user)</p>
<p>The script is configurator.sh, if you followed<br>this guide, in&nbsp;/ opt / openIMSCore.&nbsp;To customize the IMS network,<br>run:</p>
<p>. / Configurator.sh pcscf.cfg icscf.cfg icscf.xml scscf.cfg<br>scscf.xml ser_ims / cfg / icscf.sql FHoSS / deploy / DiameterPeerHSS.xml FHoSS<br>/ deploy / hss.properties FHoSS / scripts / hss_db.sql FHoSS / scripts /<br>userdata.sql</p>
<p>You will be asked, as mentioned previously, the<br>realm and the IP address.</p>
<p>Once done, you must update the database using the<br>shell the following commands:</p>
<p>cd / opt / OpenIMSCore</p>
<p>mysql-u root-p &lt;ser_ims / cfg / icscf.sql</p>
<p>mysql-u root-p &lt;FHoSS / scripts / hss_db.sql</p>
<p>mysql-u root-p &lt;FHoSS / scripts / userdata.sql</p>
<p>If you changed the IP or the realm, you must<br>review the information of users and network settings present in the HSS.</p>
<p>Finally, you must restart the various<br>entities.&nbsp;In particular, you have to block 3 CSCF using Ctrl + C while you<br>block FHoSS typing exit.&nbsp;Re-enabled services using respectively the<br>commands in the 4 tabs:</p>
<p>For P-CSCF lanciarce</p>
<p>/ Opt / OpenIMSCore / pcscf.sh</p>
<p>To run I-CSCF</p>
<p>/ Opt / OpenIMSCore / icscf.sh</p>
<p>To launch the S-CSCF</p>
<p>/ Opt / OpenIMSCore / scscf.sh</p>
<p>To launch FHoSS</p>
<p>/ Opt / OpenIMSCore / fhoss.sh</p>
<p>References and Support</p>
<p>We list the references that I made up.</p>
<ul>
<li>OpenIMSCore:<br> Driving&nbsp;<a target="_blank" rel="noopener" href="http://uctimsclient.berlios.de/openimscore_on_ubuntu_howto.html">http://uctimsclient.berlios.de/openimscore_on_ubuntu_howto.html</a></li>
<li>OpenIMSCore:<br> Official site of the project&nbsp;<a target="_blank" rel="noopener" href="http://www.openimscore.org/">http://www.openimscore.org/</a></li>
<li>UctIMSClient:<br> Driving&nbsp;<a target="_blank" rel="noopener" href="http://uctimsclient.berlios.de/uctimsclient_on_ubuntu_howto.html">Adminpanel</a></li>
</ul>
<p>As for support, pointing you to the possible ways<br>to get help:</p>
<ul>
<li>OpenIMSCore: the<br> official mailing list&nbsp;<a target="_blank" rel="noopener" href="http://www.openimscore.org/maillists">http://www.openimscore.org/maillists</a></li>
<li>UctIMSClient: the<br> official mailing list&nbsp;<a href="mailto:uctimsclient-users@lists.berlios.de">uctimsclient-users@lists.berlios.de</a></li>
<li>OpenIMSCore:<br> Comments to this post</li>
<li>UctIMSCore:<br> Comments to this post</li>
</ul>
<p>Please test it and let me know if there are<br>errors in the guide or if you make mistakes in installing or configuring<br>OpenIMSCore.&nbsp;When it becomes stable, I think I will return in the ubuntu<br>documentation.</p>
<p>Until next time,</p>
<p>cheers from cold Sarajevo&nbsp;</p>
<p>来自 <a target="_blank" rel="noopener" href="https://www.mehic.info/2011/12/openimscore-installation-and-configuration-guide/">https://www.mehic.info/2011/12/openimscore-installation-and-configuration-guide/</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://blog.aymar.cn">aymar</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://blog.aymar.cn/articles/%E7%BD%91%E7%BB%9C%EF%BC%88network%EF%BC%89/%E6%A0%B8%E5%BF%83%E7%BD%91/IMS/OpenIMSCore%E5%AE%89%E8%A3%85/">https://blog.aymar.cn/articles/%E7%BD%91%E7%BB%9C%EF%BC%88network%EF%BC%89/%E6%A0%B8%E5%BF%83%E7%BD%91/IMS/OpenIMSCore%E5%AE%89%E8%A3%85/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://blog.aymar.cn" target="_blank">热带雨林</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/blog/">blog</a><a class="post-meta__tags" href="/tags/OpenIMSCore/">OpenIMSCore</a><a class="post-meta__tags" href="/tags/IMS/">IMS</a></div><div class="post-share"><div class="social-share" data-image="https://pic.netbian.com/uploads/allimg/250709/232629-17520747894466.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/articles/%E7%BD%91%E7%BB%9C%EF%BC%88network%EF%BC%89/%E6%A0%B8%E5%BF%83%E7%BD%91/IMS/openims%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC/" title="openims安装脚本"><img class="cover" src="https://pic.netbian.com/uploads/allimg/250709/232629-17520747894466.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">openims安装脚本</div></div><div class="info-2"><div class="info-item-1">1...</div></div></div></a><a class="pagination-related" href="/articles/%E4%BA%91%E8%AE%A1%E7%AE%97%EF%BC%88Cloud%20Service%EF%BC%89/%E5%AE%B9%E5%99%A8/docker/docker%E4%B8%8B%E6%8C%87%E5%AE%9Amysql%E5%AF%86%E7%A0%81/" title="docker下指定mysql密码"><img class="cover" src="https://pic.netbian.com/uploads/allimg/250709/232629-17520747894466.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">docker下指定mysql密码</div></div><div class="info-2"><div class="info-item-1">1 示例12docker pull mysql$ docker run -itd --name mysql-test -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 mysql   123#启动docker run --name mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=Lzslov123! -d mysql-d 表示作为一个守护进程在后台运行  123docker run -p 3306:3306 --name mysql \-e MYSQL_ROOT_PASSWORD=PASSWORD \-d --user root hub.ieucd.com/library/mysql:5.7   1234567891011121314151617181920212223242526直接挂载目录可能失败，可以先运行个实例，把目录拷出来Docker cp mysql:/etc/mysql   /etc先手动创建rm -rf /var/lib/mysql/* /etc/mysql/* mkdir -p ...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/articles/%E7%BD%91%E7%BB%9C%EF%BC%88network%EF%BC%89/%E6%A0%B8%E5%BF%83%E7%BD%91/IMS/IFC/" title="IFC"><img class="cover" src="https://pic.netbian.com/uploads/allimg/250709/232629-17520747894466.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2021-03-31</div><div class="info-item-2">IFC</div></div><div class="info-2"><div class="info-item-1">1234567891011121314151617181920212223242526272829303132333435363738394041424344&lt;iFCs&gt;  &lt;InitialFilterCriteria&gt;    &lt;Priority&gt;0&lt;/Priority&gt;    &lt;TriggerPoint&gt;      &lt;ConditionTypeCNF&gt;0&lt;/ConditionTypeCNF&gt;&lt;SPT&gt;        &lt;ConditionNegated&gt;0&lt;/ConditionNegated&gt;        &lt;Group&gt;1&lt;/Group&gt;        &lt;Method&gt;INVITE&lt;/Method&gt;      &lt;/SPT&gt;&lt;SPT&gt;        &lt;ConditionNegated&gt;0&lt;/ConditionNegated&gt;       ...</div></div></div></a><a class="pagination-related" href="/articles/%E7%BD%91%E7%BB%9C%EF%BC%88network%EF%BC%89/%E6%A0%B8%E5%BF%83%E7%BD%91/IMS/OpenIMSCore%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%94%A8%E6%88%B7%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/" title="OpenIMSCore客户端用户配置文件"><img class="cover" src="https://pic.netbian.com/uploads/allimg/250709/232629-17520747894466.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2021-03-29</div><div class="info-item-2">OpenIMSCore客户端用户配置文件</div></div><div class="info-2"><div class="info-item-1">root@ubuntu-vm:/opt/MONSTER.bin/etc/monster# cat Bob.profile#MONSTER profile#Mon Mar 16 20:05:15 CET...</div></div></div></a><a class="pagination-related" href="/articles/%E7%BD%91%E7%BB%9C%EF%BC%88network%EF%BC%89/%E6%A0%B8%E5%BF%83%E7%BD%91/IMS/OpenIMSCore%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7%E8%84%9A%E6%9C%AC/" title="OpenIMSCore添加用户脚本"><img class="cover" src="https://pic.netbian.com/uploads/allimg/250709/232629-17520747894466.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2021-04-21</div><div class="info-item-2">OpenIMSCore添加用户脚本</div></div><div class="info-2"><div class="info-item-1">...</div></div></div></a><a class="pagination-related" href="/articles/%E7%BD%91%E7%BB%9C%EF%BC%88network%EF%BC%89/%E6%A0%B8%E5%BF%83%E7%BD%91/IMS/gcc/" title="gcc for OpenIMSCore"><img class="cover" src="https://pic.netbian.com/uploads/allimg/250709/232629-17520747894466.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2021-03-31</div><div class="info-item-2">gcc for OpenIMSCore</div></div><div class="info-2"><div class="info-item-1">1 下载源码：1234wget http://ftp.gnu.org/gnu/gcc/gcc-4.9.4/gcc-4.9.4.tar.gztar -xzvf gcc-4.9.4.tar.gzcd gcc-4.9.4./contrib/download_prerequisites  2 编译安装：1234mkdir gcc-build-4.9.4cd gcc-build-4.9.4../configure --enable-languages=c,c++ --disable-multilibmake -j4 &amp;&amp; make install  3 ​验证版本：1gcc --version 4 参考https://www.vpser.net/manage/centos-6-upgrade-gcc.htmlhttp://ftp.gnu.org/gnu/gcc/ 错误1: C++编译器缺失或不可用 12configure: error: C++ compiler missing or inoperationalmake[2]: ​***...</div></div></div></a><a class="pagination-related" href="/articles/%E7%BD%91%E7%BB%9C%EF%BC%88network%EF%BC%89/%E6%A0%B8%E5%BF%83%E7%BD%91/IMS/OpenIMSCore%E7%AB%AF%E5%8F%A3/" title=" OpenIMSCore端口"><img class="cover" src="https://pic.netbian.com/uploads/allimg/250709/232629-17520747894466.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2021-03-29</div><div class="info-item-2"> OpenIMSCore端口</div></div><div class="info-2"><div class="info-item-1">1 规划   主机 IP 地址（双网卡） 操作系统 部署的主要组件    138 192.168.0.13810.0.80.138 CentOS6.5 x64 ICSCF、SCSCF、HSS、mysql   139 192.168.0.13910.0.80.139 CentOS6.5 x64 PCSCF、DNS   2 端口介绍/opt/OpenIMSCore/ser_ims/ser -f /opt/OpenIMSCore/icscf.cfg -D -D  E-CSCF uri is sip:ecscf.open-ims.test:7060    fhoss 8080 10.0.80.138:3868    p udp: 0.0.0.0 [0.0.0.0]:4060tcp: 0.0.0.0 [0.0.0.0]:4060 127.0.0.1:40054127.0.0.1:40053 连接 127.0.0.1 3306   i udp: 0.0.0.0 [0.0.0.0]:5060tcp: 0.0.0.0 [0.0.0.0]:5060 0.0.0.0 port 3869 Peer...</div></div></div></a><a class="pagination-related" href="/articles/%E7%BD%91%E7%BB%9C%EF%BC%88network%EF%BC%89/%E6%A0%B8%E5%BF%83%E7%BD%91/IMS/jdk%20%E5%AE%89%E8%A3%851.7%20%E6%88%961.8/" title="jdk 安装1.7 或1.8"><img class="cover" src="https://pic.netbian.com/uploads/allimg/250709/232629-17520747894466.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2021-03-27</div><div class="info-item-2">jdk 安装1.7 或1.8</div></div><div class="info-2"><div class="info-item-1">1 安装https://www.oracle.com/java/technologies/javase/javase7-archive-downloads.html mkdir javacp jdk-1_7-linux-i586-rpm.bin  javachmod +x jdk-1_7-linux-i586-rpm.bin./jdk-1_7-linux-i586-rpm.binmkdir /usr/javarpm -ivh jdk-1_5_0_22-linux-i586.rpm 2 配置12345$ vim /etc/profileJAVA_HOME=/usr/java/latestCLASSPATH=.:$JAVA_HOME/lib/tools.jar:$JAVA_HOME/lib/dt.jarPATH=$JAVA_HOME/bin:$PATHexport JAVA_HOME CLASSPATH PATH   java -version 3 参考3.1 JDK版本错误：Unsupported major.minor version 51.0[main] WARN ...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/config/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">aymar</div><div class="author-info-description">知之者不如好之者，好之者不如乐之者。</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">52</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">48</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">24</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">亲爱的读者朋友们， 欢迎来到我的博客！非常感谢大家对我的支持和关注。 在这里，我将分享各种有趣的内容，包括技术文章、生活点滴、旅行故事、书籍推荐等等。无论你是技术爱好者、旅行达人，还是喜欢阅读和学习的新手，我希望你都能在这里找到你感兴趣的内容。 我会不定期更新博客，带来更多精彩的内容。同时，我也非常期待与大家互动交流，如果你有任何建议或想法，欢迎在评论区留言或者通过邮件与我联系。</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.</span> <span class="toc-text">1 安装步骤</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E5%8F%82%E8%80%83"><span class="toc-number">2.</span> <span class="toc-text">2 参考</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E5%BC%80%E6%BA%90SIP"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 开源SIP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-OpenIMSCore-Installation-andConfiguration-Guide"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 OpenIMSCore : Installation andConfiguration Guide</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/articles/%E7%BD%91%E7%BB%9C%EF%BC%88network%EF%BC%89/%E7%BD%91%E7%BB%9C%EF%BC%88network%EF%BC%89/" title="无标题"><img src="https://pic.netbian.com/uploads/allimg/250709/232629-17520747894466.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="无标题"/></a><div class="content"><a class="title" href="/articles/%E7%BD%91%E7%BB%9C%EF%BC%88network%EF%BC%89/%E7%BD%91%E7%BB%9C%EF%BC%88network%EF%BC%89/" title="无标题">无标题</a><time datetime="2025-04-13T12:57:16.554Z" title="发表于 2025-04-13 20:57:16">2025-04-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/articles/%E8%BD%AF%E4%BB%B6%EF%BC%88Software%EF%BC%89/%E2%80%8B%E7%AC%94%E8%AE%B0%E7%9F%A5%E8%AF%86%E7%AE%A1%E7%90%86/obsidian/obsidian%E5%8D%8A%E8%87%AA%E5%8A%A8%E5%88%A0%E9%99%A4picgo%E5%9B%BE%E5%BA%8A%E7%85%A7%E7%89%87/" title="obsidian半自动删除picgo远端图床照片"><img src="https://pic.netbian.com/uploads/allimg/250709/232629-17520747894466.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="obsidian半自动删除picgo远端图床照片"/></a><div class="content"><a class="title" href="/articles/%E8%BD%AF%E4%BB%B6%EF%BC%88Software%EF%BC%89/%E2%80%8B%E7%AC%94%E8%AE%B0%E7%9F%A5%E8%AF%86%E7%AE%A1%E7%90%86/obsidian/obsidian%E5%8D%8A%E8%87%AA%E5%8A%A8%E5%88%A0%E9%99%A4picgo%E5%9B%BE%E5%BA%8A%E7%85%A7%E7%89%87/" title="obsidian半自动删除picgo远端图床照片">obsidian半自动删除picgo远端图床照片</a><time datetime="2025-03-30T13:53:02.000Z" title="发表于 2025-03-30 21:53:02">2025-03-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/articles/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%EF%BC%88AI%EF%BC%89/Windows%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2DeepSeek-r1/" title="Windows本地部署DeepSeek-r1"><img src="https://pic.netbian.com/uploads/allimg/250709/232629-17520747894466.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Windows本地部署DeepSeek-r1"/></a><div class="content"><a class="title" href="/articles/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%EF%BC%88AI%EF%BC%89/Windows%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2DeepSeek-r1/" title="Windows本地部署DeepSeek-r1">Windows本地部署DeepSeek-r1</a><time datetime="2025-02-04T16:00:00.000Z" title="发表于 2025-02-05 00:00:00">2025-02-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/articles/%E8%BD%AF%E4%BB%B6%EF%BC%88Software%EF%BC%89/%E2%80%8B%E7%AC%94%E8%AE%B0%E7%9F%A5%E8%AF%86%E7%AE%A1%E7%90%86/obsidian/PicGo-app/" title="使用picgo为obsidian创建ftp图床"><img src="https://pic.netbian.com/uploads/allimg/250709/232629-17520747894466.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用picgo为obsidian创建ftp图床"/></a><div class="content"><a class="title" href="/articles/%E8%BD%AF%E4%BB%B6%EF%BC%88Software%EF%BC%89/%E2%80%8B%E7%AC%94%E8%AE%B0%E7%9F%A5%E8%AF%86%E7%AE%A1%E7%90%86/obsidian/PicGo-app/" title="使用picgo为obsidian创建ftp图床">使用picgo为obsidian创建ftp图床</a><time datetime="2024-10-20T16:00:00.000Z" title="发表于 2024-10-21 00:00:00">2024-10-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/articles/%E4%BA%91%E8%AE%A1%E7%AE%97%EF%BC%88Cloud%20Service%EF%BC%89/k8s/k8s%E5%90%84%E7%A7%8D%E5%BA%94%E7%94%A8%E5%AE%89%E8%A3%85/" title="k8s各种应用安装"><img src="https://pic.netbian.com/uploads/allimg/250709/232629-17520747894466.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="k8s各种应用安装"/></a><div class="content"><a class="title" href="/articles/%E4%BA%91%E8%AE%A1%E7%AE%97%EF%BC%88Cloud%20Service%EF%BC%89/k8s/k8s%E5%90%84%E7%A7%8D%E5%BA%94%E7%94%A8%E5%AE%89%E8%A3%85/" title="k8s各种应用安装">k8s各种应用安装</a><time datetime="2023-03-22T16:00:00.000Z" title="发表于 2023-03-23 00:00:00">2023-03-23</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="footer_custom_text">©2014 - ©2024 aymar. All rights reserved.</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.isShuoshuo
  const option = {"language":"zh-CN","perPage":50,"pagerDirection":"last","createIssueManually":false,"proxy":"https://gitalk.aymar.cn/https://github.com/login/oauth/access_token"}

  const commentCount = n => {
    const isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
    if (isCommentCount) {
      isCommentCount.textContent= n
    }
  }

  const initGitalk = (el, path) => {
    if (isShuoshuo) {
      window.shuoshuoComment.destroyGitalk = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }

    const gitalk = new Gitalk({
      clientID: '3911bd8dbdeee631dbc3',
      clientSecret: '0e7b2a06fc06a1cae2293d84a7f83fe1213023c9',
      repo: 'pping.github.io',
      owner: 'pping',
      admin: ['pping'],
      updateCountCallback: commentCount,
      ...option,
      id: isShuoshuo ? path : (option && option.id) || '3b7a153ba1040b5a68ab18cddd99b4bc'
    })

    gitalk.render('gitalk-container')
  }

  const loadGitalk = async(el, path) => {
    if (typeof Gitalk === 'function') initGitalk(el, path)
    else {
      await btf.getCSS('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css')
      await btf.getScript('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js')
      initGitalk(el, path)
    }
  }

  if (isShuoshuo) {
    'Gitalk' === 'Gitalk'
      ? window.shuoshuoComment = { loadComment: loadGitalk }
      : window.loadOtherComment = loadGitalk
    return
  }

  if ('Gitalk' === 'Gitalk' || !false) {
    if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
    else loadGitalk()
  } else {
    window.loadOtherComment = loadGitalk
  }
})()</script></div><link rel="stylesheet" href="/config/css/custom_bottom.css"><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="人工智能" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>